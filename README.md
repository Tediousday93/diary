# ì¼ê¸°ì¥ ğŸ“”
> CoreData, TextViewë¥¼ í™œìš©í•´ ì‚¬ìš©ìê°€ ì‘ì„±í•œ í…ìŠ¤íŠ¸ë¥¼ ì €ì¥/ê³µìœ í•˜ëŠ” ì•±ì…ë‹ˆë‹¤.
> * ì£¼ìš” ê°œë…: `UITextView`, `UITableView`, `Factory Pattern`, `Localization`, `CoreLocation`, `CoreData`, `URLSession`
> 
> í”„ë¡œì íŠ¸ ê¸°ê°„: 2023.04.24 ~ 2023.05.12

### ğŸ’» ê°œë°œí™˜ê²½ ë° ë¼ì´ë¸ŒëŸ¬ë¦¬
<img src = "https://img.shields.io/badge/swift-5.8-orange"> <img src = "https://img.shields.io/badge/Minimum%20Deployment%20Target-14.0-blue">  <img src = "https://img.shields.io/badge/swiftLint-0.51.0-brightgreen"> 

## â­ï¸ íŒ€ì›
| Rowan | Harry |
| :--------: |  :--------: |
| <Img src = "https://i.imgur.com/S1hlffJ.jpg"  height="200"/> |<img height="200" src="https://i.imgur.com/8pKgxIk.jpg">
| [Github Profile](https://github.com/Kyeongjun2) |[Github Profile](https://github.com/HarryHyeon) | 

</br>

## ğŸ“ ëª©ì°¨
1. [íƒ€ì„ë¼ì¸](#-íƒ€ì„ë¼ì¸)
2. [í”„ë¡œì íŠ¸ êµ¬ì¡°](#-í”„ë¡œì íŠ¸-êµ¬ì¡°)
3. [ì‹¤í–‰í™”ë©´](#-ì‹¤í–‰í™”ë©´)
4. [íŠ¸ëŸ¬ë¸” ìŠˆíŒ…](#-íŠ¸ëŸ¬ë¸”-ìŠˆíŒ…)
5. [í•µì‹¬ê²½í—˜](#-í•µì‹¬ê²½í—˜)
6. [íŒ€ íšŒê³ ](#-íŒ€-íšŒê³ )
7. [ì°¸ê³  ë§í¬](#-ì°¸ê³ -ë§í¬)

</br>

# ğŸ“† íƒ€ì„ë¼ì¸ 
- 2023.04.24 : SwiftLint ì ìš©
- 2023.04.25 : ì¼ê¸°ì¥ ëª©ë¡ ì…€ êµ¬í˜„, ì¼ê¸°ì¥ ëª©ë¡í™”ë©´ êµ¬í˜„
- 2023.04.26 : ì¼ê¸°ì¥ ìƒì„¸ë³´ê¸° í™”ë©´ êµ¬í˜„, ì¼ê¸°ì¥ ë‚´ìš© í¸ì§‘ ì‹œ, ë·°ê°€ í‚¤ë³´ë“œì— ê°€ë¦¬ì§€ ì•Šë„ë¡ í•˜ëŠ” ê¸°ëŠ¥ êµ¬í˜„
- 2023.04.27 : Alert Factory Pattern êµ¬í˜„, ì½”ë”© ì»¨ë²¤ì…˜ ë¦¬íŒ©í† ë§
- 2023.04.28 : README ì‘ì„±, CoreData Entity ì •ì˜
- 2023.05.01 : CoreDataManager CRUD ì •ì˜, ì¼ê¸°ì¥ ìƒì„± ë²„íŠ¼ì„ ëˆ„ë¥´ë©´ CoreDataì— ìƒˆë¡œìš´ ë°ì´í„°ê°€ ì €ì¥ë˜ë„ë¡ êµ¬í˜„
- 2023.05.02 : ì¼ê¸°ì¥ í™”ë©´ì—ì„œ í¸ì§‘ì´ ì¢…ë£Œë  ê²½ìš° ìë™ìœ¼ë¡œ CoreDataì— ì—…ë°ì´íŠ¸í•˜ë„ë¡ êµ¬í˜„
- 2023.05.03 : ActivityView, Diary ì‚­ì œ ê¸°ëŠ¥, TableViewCell swipe êµ¬í˜„
- 2023.05.04 : Factory íŒ¨í„´ ë¦¬íŒ©í† ë§, CoreDataë¥¼ ë¶ˆëŸ¬ì˜¬ë•Œ ë‚ ì§œ ë‚´ë¦¼ì°¨ìˆœìœ¼ë¡œ ì •ë ¬ ê¸°ëŠ¥ ì¶”ê°€
- 2023.05.05 : README ìˆ˜ì •
- 2023.05.08 : CoreDataê´€ë ¨ ê°ì²´ ì¶”ìƒí™”
- 2023.05.09 : OpenAPIë¥¼ í™œìš©í•˜ê¸° ìœ„í•œ Network ê´€ë ¨ ê°ì²´ ì •ì˜, CoreDataModel Weather Entity ì¶”ê°€
- 2023.05.10 : CoreDataModel Entity 2ê°€ì§€ì˜ CRUDë¥¼ í•¨ê»˜ ê´€ë¦¬í•˜ëŠ” DiaryDataManager ê°ì²´ ì •ì˜
- 2023.05.11 : Alertì„ í†µí•œ Network Error Handling êµ¬í˜„, File Tree/ì½”ë“œ ì „ë°˜ Naming ìˆ˜ì • 
- 2023.05.12 : LocationHelper class ì •ì˜, ì½”ë“œ ì»¨ë²¤ì…˜/README ìˆ˜ì •

</br>

# ğŸŒ³ í”„ë¡œì íŠ¸ êµ¬ì¡°

## File Tree
```
â””â”€â”€ Diary
 Â Â  â”œâ”€â”€ AppDelegate
 Â Â  â”œâ”€â”€ SceneDelegate
    â”œâ”€â”€ Model
    â”‚Â Â  â”œâ”€â”€ Diary
 Â Â  â”‚Â Â  â””â”€â”€ Weather
    â”œâ”€â”€ DiaryContentView
 Â Â  â”‚Â Â  â”œâ”€â”€ Helper
 Â Â  â”‚Â Â  â”‚Â Â  â””â”€â”€ LocationHelper
 Â Â  â”‚Â Â  â””â”€â”€ ViewController
 Â Â  â”‚Â Â      â””â”€â”€ DiaryContentViewController
 Â Â  â”œâ”€â”€ DiaryListView
 Â Â  â”‚Â Â  â”œâ”€â”€ Protocol
 Â Â  â”‚Â Â  â”‚Â Â  â””â”€â”€ DiaryContentsViewDelegate
 Â Â  â”‚Â Â  â”œâ”€â”€ View
 Â Â  â”‚Â Â  â”‚Â Â  â””â”€â”€ DiaryListCell
 Â Â  â”‚Â Â  â””â”€â”€ ViewController
 Â Â  â”‚Â Â      â””â”€â”€ DiaryListViewController
 Â Â  â”œâ”€â”€ Utility
 Â Â  â”‚Â Â  â”œâ”€â”€ AlertFactory
    â”‚Â Â  â”‚Â Â  â”œâ”€â”€ AlertController
 Â Â  â”‚Â Â  â”‚Â Â  â”‚Â Â  â”œâ”€â”€ DiaryAlertMaker
 Â Â  â”‚Â Â  â”‚Â Â  â”‚Â Â  â””â”€â”€ DiaryAlertFactory
    â”‚Â Â  â”‚Â Â  â””â”€â”€ AlertData
 Â Â  â”‚Â Â  â”‚Â Â      â”œâ”€â”€ ActionSheetViewData
 Â Â  â”‚Â Â  â”‚    Â Â  â”œâ”€â”€ AlertViewData
    â”‚Â Â  â”‚    Â Â  â”œâ”€â”€ DiaryAlertDataFactory
 Â Â  â”‚Â Â  â”‚Â Â      â””â”€â”€ DiaryAlertDataMaker
 Â Â  â”‚   â”œâ”€â”€ DataProtocols
 Â Â  â”‚   â”‚Â Â  â”œâ”€â”€ DataAccessObject
 Â Â  â”‚   â”‚Â Â  â””â”€â”€ DataTransferObject
 Â Â  â”‚   â””â”€â”€ Extension
 Â Â  â”‚       â””â”€â”€ DateFormatter+diaryForm
    â”œâ”€â”€ Resource
 Â Â  â”‚Â Â  â”œâ”€â”€ Assets
 Â Â  â”‚Â Â  â””â”€â”€ LaunchScreen
 Â Â  â”œâ”€â”€ CoreData
 Â Â  â”‚Â Â  â”œâ”€â”€ DiaryDAO
 Â Â  â”‚Â Â  â”‚Â Â  â”œâ”€â”€ Diary v2
 Â Â  â”‚Â Â  â”‚Â Â  â””â”€â”€ Diary
 Â Â  â”‚Â Â  â”œâ”€â”€ Entity
 Â Â  â”‚Â Â  â”‚Â Â  â”œâ”€â”€ DiaryDAO+CoreDataClass
 Â Â  â”‚Â Â  â”‚Â Â  â”œâ”€â”€ DiaryDAO+CoreDataProperties
 Â Â  â”‚Â Â  â”‚Â Â  â”œâ”€â”€ WeatherDAO+CoreDataClass
 Â Â  â”‚Â Â  â”‚Â Â  â””â”€â”€ WeatherDAO+CoreDataProperties
    â”‚Â Â  â”œâ”€â”€ CoreDataManager
 Â Â  â”‚Â Â  â”œâ”€â”€ CoreDataStack
    â”‚Â Â  â”œâ”€â”€ DiaryDataManager
 Â Â  â”‚Â Â  â””â”€â”€ SortDescription
 Â Â  â”œâ”€â”€ Network
 Â Â  â”‚Â Â  â”œâ”€â”€ Endpoint
 Â Â  â”‚Â Â  â”œâ”€â”€ NetworkError
 Â Â  â”‚Â Â  â”œâ”€â”€ NetworkManager
 Â Â  â”‚Â Â  â”œâ”€â”€ OpenWeatherAPI
 Â Â  â”‚Â Â  â”œâ”€â”€ OpenWeatherService
 Â Â  â”‚Â Â  â””â”€â”€ Protocol
 Â Â  â”‚Â Â      â””â”€â”€ APIInfo
 Â Â  â””â”€â”€ Info.plist
```

</br>

# ğŸ“± ì‹¤í–‰í™”ë©´

| **ë‹¤ì´ì–´ë¦¬ ìƒì„±** | **ë‹¤ì´ì–´ë¦¬ ì‚­ì œ** | 
| :--------: | :--------: |
| <img src="https://github.com/Tediousday93/diary/assets/114981173/a72a1c84-6a95-480b-80d3-a41e10da5c99" width=200> | <img src="https://github.com/Tediousday93/diary/assets/114981173/17cce3d2-3f80-4308-affd-bb118f41e0ff" width=200>    | 

| **ë‹¤ì´ì–´ë¦¬ ìˆ˜ì •** | **ì•¡í‹°ë¹„í‹° ë·°** |
| :--------: | :--------: |
| <img src="https://github.com/Tediousday93/diary/assets/114981173/898a7508-25ec-410a-9916-036f6523bffb" width=200> | <img src="https://github.com/Tediousday93/diary/assets/114981173/72c487c4-1f53-47ac-b563-d01e55cf8199" width=200> |


</br>

# ğŸš€ íŠ¸ëŸ¬ë¸” ìŠˆíŒ…

</br>

## 1ï¸âƒ£ CoreData ëª¨ë¸ì— Entity ì¶”ê°€ì‹œ ìƒê¸°ëŠ” ì½”ë“œ ìˆ˜ì • ë¬¸ì œ

### ğŸ” ë¬¸ì œì 
ì•„ë˜ì˜ ì½”ë“œì²˜ëŸ¼ í•˜ë‚˜ì˜ ì—”í‹°í‹°ë§Œ ìˆì„ ë•Œ ìƒˆë¡œìš´ ì—”í‹°í‹°ê°€ ì¶”ê°€ ëœë‹¤ë©´ ì½”ì–´ë°ì´í„° ëª¨ë¸ì„ ë§ˆì´ê·¸ë ˆì´ì…˜ í•œ í›„ ë©”ì„œë“œ íŒŒë¼ë¯¸í„°ë¶€í„° ì‹œì‘í•´ì„œ ëª¨ë‘ ìˆ˜ì •í•´ì£¼ì–´ì•¼ í–ˆìŠµë‹ˆë‹¤. ë˜, Attributeê°€ ì¶”ê°€ë˜ëŠ” ê²½ìš°ë„ ë§ˆì°¬ê°€ì§€ ì¼ ê²ƒì´ë¼ ìƒê°í•´ì„œ ëª¨ë“  ì—”í‹°í‹°ì— ëŒ€í•œ CRUDê°€ ê°€ëŠ¥í•˜ë„ë¡ ì½”ì–´ë°ì´í„°ì˜ ì¶”ìƒí™”ê°€ í•„ìš”í•˜ë‹¤ê³  ëŠê¼ˆìŠµë‹ˆë‹¤. 

``` swift
func createDiary(title: String, body: String, date: Double, id: UUID) -> Diary? {
    if let diaryEntity {
        let diary = Diary(entity: diaryEntity, insertInto: context)
        diary.setValue(title, forKey: "title")
        diary.setValue(date, forKey: "date")
        diary.setValue(body, forKey: "body")
        diary.setValue(id, forKey: "id")

        saveContext()

        return diary
    }

    return nil
}
```

</br>

### âš’ï¸ í•´ê²°ë°©ì•ˆ
ìš°ì„  ì½”ì–´ë°ì´í„° ì—”í‹°í‹°ë“¤ì„ `DataAccessObject` í”„ë¡œí† ì½œë¡œ ì¶”ìƒí™” í–ˆìŠµë‹ˆë‹¤. ê·¸ë¦¬ê³  ë·°ì»¨íŠ¸ë¡¤ëŸ¬ì—ì„œ ë‹¤ë£¨ëŠ” ë„ë©”ì¸ ëª¨ë¸ì˜ íƒ€ì…ì€ `DataTransferObject` í”„ë¡œí† ì½œë¡œ ì¶”ìƒí™”ë¥¼ í•˜ê³  ì œë„¤ë¦­ì„ í™œìš©í•´ `DataAccessObject`ë¥¼ ì±„íƒí•œ íƒ€ì…ì˜ ë©”íƒ€íƒ€ì…ì„ íŒŒë¼ë¯¸í„°ë¡œ ë°›ì•„ì„œ NSManagedObjectë¥¼ ìƒì„±í•˜ë„ë¡ í–ˆìŠµë‹ˆë‹¤.

``` swift
extension DataAccessObject {
    static func object(entityName: String, context: NSManagedObjectContext) -> Self? {
        guard let entityDescription = NSEntityDescription.entity(
            forEntityName: entityName,
            in: context
        ) else { return nil }
        guard let object = NSManagedObject(entity: entityDescription, insertInto: context) as? Self else { return nil }
        
        return object
    }
}
```
`DataAccessObject`ì˜ extensionì—ì„œ ì—”í‹°í‹° ê°ì²´ë¥¼ ë°˜í™˜í•´ì£¼ëŠ” íƒ€ì…ë©”ì„œë“œë¥¼ ì •ì˜í–ˆìŠµë‹ˆë‹¤.

``` swift
func createDAO<DAO: DataAccessObject>(type: DAO.Type) -> DAO? {
    guard let entityName = DAO.entity().name,
          let object = DAO.object(entityName: entityName, context: storage.context) else { return nil }

    return object
}
```
NSManagedObject íƒ€ì… ë©”ì„œë“œì¸ `entity()`ë¥¼ ì‚¬ìš©í•´ íƒ€ì… ì´ë¦„ì„ ê°€ì ¸ì˜¤ê³ , ì •ì˜í•´ë‘” íƒ€ì…ë©”ì„œë“œì¸ `object(entityName: , context: )`ë¡œ ì—”í‹°í‹°ì˜ ì¸ìŠ¤í„´ìŠ¤ë¥¼ ìƒì„±í•  ìˆ˜ ìˆì—ˆìŠµë‹ˆë‹¤.

</br>

## 2ï¸âƒ£ CoreData ëª¨ë¸ì— Entity ì¶”ê°€ì— ë”°ë¥¸ CRUD ë¬¸ì œ
### ğŸ” ë¬¸ì œì 
ìœ„ì—ì„œ ì œë„¤ë¦­ + í”„ë¡œí† ì½œë¡œ ëª¨ë“  ì—”í‹°í‹°ì— ëŒ€í•œ CRUDì— ëŒ€ì‘ê°€ëŠ¥í•œ íƒ€ì…ì„ `CoreDataManager`ë¼ê³  ì •ì˜í–ˆìŠµë‹ˆë‹¤.

í•˜ì§€ë§Œ relationshipì„ ê°–ëŠ” Entityê°€ ì¶”ê°€ë˜ë©´ ë‘ Entityì˜ DAOë¥¼ ë™ì‹œì— CRUD í•  ìˆ˜ ì—†ë‹¤ëŠ” ë¬¸ì œì ì´ ìˆì—ˆìŠµë‹ˆë‹¤.

`CoreDataManager`ì˜ ì œë„¤ë¦­ ë©”ì„œë“œëŠ” í•˜ë‚˜ì˜ DAOì— ëŒ€í•œ CRUDë§Œì„ ê´€ë¦¬í•  ìˆ˜ ìˆê¸° ë•Œë¬¸ì…ë‹ˆë‹¤.

</br>

### âš’ï¸ í•´ê²°ë°©ì•ˆ
`CoreDataManager`ë¥¼ í”„ë¡œí¼í‹°ë¡œ ê°–ëŠ” `DiaryDataManager`ë¼ëŠ” êµ¬ì²´ íƒ€ì…ì„ ì •ì˜í•´ ë·°ì»¨íŠ¸ë¡¤ëŸ¬ì—ì„œ ë‘ ê°€ì§€ ì—”í‹°í‹°ì˜ CRUD ë° relationship ì„¤ì •ì„ ë™ì‹œì— ê´€ë¦¬í•  ìˆ˜ ìˆëŠ” ì¸í„°í˜ì´ìŠ¤ë¥¼ ì œê³µí•˜ë„ë¡ í•˜ì˜€ìŠµë‹ˆë‹¤.

``` swift
func create(data: Diary) {
    let diaryDAO = coreDataManager.createDAO(type: DiaryDAO.self)
    let weatherDAO = coreDataManager.createDAO(type: WeatherDAO.self)

    diaryDAO?.weather = weatherDAO
    diaryDAO?.setValues(from: data)

    coreDataManager.saveContext()
}
```
ì¼ê¸°ì¥ ìƒì„±ì„ í•˜ëŠ” ë©”ì„œë“œì—ì„œëŠ” `CoreDataManager`ë¥¼ í†µí•´ `DiaryDAO`, `WeatherDAO` ì—”í‹°í‹°ë¥¼ ë§Œë“¤ì–´ ê°’ ì„¸íŒ… ë° relationshipì„ ì—°ê²°ì‹œì¼œì¤ë‹ˆë‹¤. 

``` swift
func readAll() -> [Diary] {
    let sortDescription = SortDescription(key: "date", ascending: false)
    let diaryDAOList = coreDataManager.readAllDAO(type: DiaryDAO.self, sortDescription: sortDescription)
    let diaryList = diaryDAOList.map { diaryDAO in
        Diary(diaryDAO: diaryDAO)
    }

    return diaryList
}
```
ëª¨ë“  ì¼ê¸°ì¥ì„ ì½ì–´ì˜¤ëŠ” ë©”ì„œë“œëŠ” ë·° ì»¨íŠ¸ë¡¤ëŸ¬ì—ì„œ ë‹¤ë£¨ëŠ” ë„ë©”ì¸ ëª¨ë¸ì¸ `Diary`ë¡œ ë³€í™˜í•˜ì—¬ ë·° ì»¨íŠ¸ë¡¤ëŸ¬ê°€ `DataAccessObject`ì— ëŒ€í•œ ì˜ì¡´ì„±ì„ ê°–ì§€ ì•Šë„ë¡ í•´ì£¼ì—ˆìŠµë‹ˆë‹¤.

**DiaryDataManagerë¥¼ ì •ì˜í•˜ê²Œ ë˜ë©´ì„œ ë·° ì»¨íŠ¸ë¡¤ëŸ¬ê°€ DataAccessObejctì— ëŒ€í•œ ì˜ì¡´ì„±ì„ ê°–ì§€ ì•Šê²Œ ë˜ì—ˆìŠµë‹ˆë‹¤.**

</br>

## 3ï¸âƒ£ TextViewê°€ Keyboardì— ê°€ë ¤ì§€ëŠ” ë¬¸ì œ

### ğŸ” ë¬¸ì œì 
ì´ë¯¸ ì‘ì„±ë˜ì–´ ìˆëŠ” ì¼ê¸°ë¥¼ í¸ì§‘í•  ë•Œ í‚¤ë³´ë“œê°€ ì˜¬ë¼ì˜¤ë©´ì„œ í…ìŠ¤íŠ¸ë·°ì˜ ë‚´ìš©ì´ ê°€ë ¤ì§€ëŠ” ë¬¸ì œê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤. ë˜í•œ, ì¼ê¸°ë¥¼ ê³„ì†í•´ì„œ ì‘ì„±í•  ë•Œ ì¤„ë°”ê¿ˆì„ í•˜ë©´ í‚¤ë³´ë“œì— ì˜í•´ í…ìŠ¤íŠ¸ë·°ê°€ ê°€ë ¤ì§€ëŠ” ë¬¸ì œì ì´ ìˆì—ˆìŠµë‹ˆë‹¤.
  
### âš’ï¸ í•´ê²°ë°©ì•ˆ
UIResponderì— ì´ë¯¸ êµ¬í˜„ë˜ì–´ìˆëŠ” keyboardWillShowNotification, keyboardWillHideNotificationì„ í™œìš©í•˜ì—¬ í‚¤ë³´ë“œê°€ í™”ë©´ì— í‘œì‹œë˜ê¸° ì§ì „, ì‚¬ë¼ì§€ê¸° ì§ì „ì— í•´ë‹¹ Notificationì„ `DiaryContentViewController`ê°€ ë°›ì„ ìˆ˜ ìˆë„ë¡ ë§Œë“¤ì—ˆìŠµë‹ˆë‹¤.

ì´í›„ ë‹¤ì–‘í•œ ë¬¸ì œí•´ê²° ë°©ë²•ì„ ì°¾ì•„ë³´ê³  ì ì ˆí•˜ë‹¤ê³  íŒë‹¨ë˜ëŠ” ë°©ë²•ìœ¼ë¡œ êµ¬í˜„í•´ë´¤ìŠµë‹ˆë‹¤.

### RootViewì˜ frame origin ì¡°ì ˆí•˜ê¸°(optional)

`view.frame.origin.y`ë¥¼ keyboardì˜ ë†’ì´ì— ë§ê²Œ ì´ë™ì‹œì¼œì£¼ëŠ” ë°©ë²•ì´ ìˆì—ˆìŠµë‹ˆë‹¤. í•˜ì§€ë§Œ rootViewì˜ frameì„ ì˜®ê¸°ë©´ keyboardê°€ í™”ë©´ì— ë‚˜íƒ€ë‚˜ìˆëŠ” ìƒíƒœì—ì„œ ìµœìƒë‹¨ìœ¼ë¡œ ìŠ¤í¬ë¡¤ í•  ê²½ìš° textì˜ ìœ„ìª½ ë¶€ë¶„ì´ keyboardì˜ ë†’ì´ë§Œí¼ ì˜ë¦¬ê²Œ ë˜ê¸° ë•Œë¬¸ì— ë¶€ì ì ˆí•˜ë‹¤ê³  ìƒê°í•˜ì—¬ ì±„íƒí•˜ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤.

### UIKeyboardLayoutGuide í™œìš©í•˜ê¸°(optional)

ë·°ì»¨íŠ¸ë¡¤ëŸ¬ ë£¨íŠ¸ë·°ì— ìˆëŠ” `keyboardLayoutGuide` í”„ë¡œí¼í‹°ë¥¼ í†µí•´ í…ìŠ¤íŠ¸ë·°ì™€ì˜ ì œì•½ê´€ê³„ë¥¼ ì„¤ì •í•´ ê°„ë‹¨í•˜ê²Œ í¸ì§‘ì¤‘ì¸ í…ìŠ¤íŠ¸ê°€ ê°€ë¦¬ì§€ ì•Šë„ë¡ í•  ìˆ˜ ìˆì—ˆìŠµë‹ˆë‹¤. (available iOS 15.0)

í”„ë¡œì íŠ¸ì˜ minimum deploymentë¥¼ ì˜¬ë ¤ì•¼í–ˆê¸° ë•Œë¬¸ì— ì´ ë°©ë²•ì„ ì±„íƒí•˜ì§€ëŠ” ì•Šì•˜ìŠµë‹ˆë‹¤. ğŸ¤”

### í…ìŠ¤íŠ¸ë·°ì˜ contentInset í™œìš©í•˜ê¸°(select)

NotificationCenterë¥¼ ì´ìš©í•˜ì—¬ `UIResponder.keyboardWillShowNotification`ê³¼ `UIResponder.keyboardWillHideNotification` ì´ë²¤íŠ¸ê°€ ë°œìƒí•  ë•Œ, í…ìŠ¤íŠ¸ë·°ì˜ contentInsetì„ ì„¤ì •í•´ì£¼ì—ˆìŠµë‹ˆë‹¤.

í…ìŠ¤íŠ¸ë·°ëŠ” ìŠ¤í¬ë¡¤ë·°ë¥¼ ìƒì†í•˜ê³  ìˆì–´ì„œ contentInset í”„ë¡œí¼í‹°ë¥¼ í™œìš©í•  ìˆ˜ ìˆì—ˆê³ , í‚¤ë³´ë“œì˜ í¬ê¸°ë¥¼ ê³„ì‚°í•´ì„œ contentInsetì˜ ë°”í…€ì„ í‚¤ë³´ë“œ ë†’ì´ë¡œ í• ë‹¹í•˜ì—¬ ì´ ë°©ë²•ìœ¼ë¡œ í¸ì§‘ì¤‘ì¸ í…ìŠ¤íŠ¸ê°€ ê°€ë ¤ì§€ì§€ ì•Šë„ë¡ í•´ì£¼ì—ˆìŠµë‹ˆë‹¤.

</br>

# âœ¨ í•µì‹¬ê²½í—˜

<details>
    <summary><big>âœ… Factory Pattern</big></summary>

<img src ="https://i.imgur.com/ma0jm3z.jpg" width="500">

ì´ë²ˆ í”„ë¡œì íŠ¸ì˜ `UIAlertController`, `AlertViewData` íƒ€ì…ì˜ ì¸ìŠ¤í„´ìŠ¤ë¥¼ ìƒì„±í•¨ì— ìˆì–´ Factory Patternì„ í™œìš©í–ˆìŠµë‹ˆë‹¤.

Factory Patternì€ ê°ì²´ë¥¼ ìƒì„±í•˜ê¸° ìœ„í•œ ì¸í„°í˜ì´ìŠ¤ë¥¼ ì •ì˜í•˜ëŠ”ë°, ì–´ë–¤ í´ë˜ìŠ¤ì˜ ì¸ìŠ¤í„´ìŠ¤ë¥¼Â ë§Œë“¤ì§€ëŠ” ì„œë¸Œí´ë˜ìŠ¤ì—ì„œ ê²°ì •í•˜ê²Œ ë§Œë“­ë‹ˆë‹¤. ì¦‰ íŒ©í† ë¦¬ ë©”ì†Œë“œ íŒ¨í„´ì„ ì´ìš©í•˜ë©´Â í´ë˜ìŠ¤ì˜ ì¸ìŠ¤í„´ìŠ¤ë¥¼ ë§Œë“œëŠ” ì¼ì„ ì„œë¸Œí´ë˜ìŠ¤ì—ê²Œ ë§¡ê¸°ëŠ” ê²ƒì…ë‹ˆë‹¤.
    
**Product**
Creator ì™€ Creatorì˜ ì„œë¸Œ í´ë˜ìŠ¤ì— ì˜í•´ ìƒì„±ë˜ëŠ” í´ë˜ìŠ¤ì—ê²Œ ê³µí†µì ì¸ ì¸í„°í˜ì´ìŠ¤ë¥¼ ì œê³µí•©ë‹ˆë‹¤.

**Concrete Product**
Productê°€ ì„ ì–¸í•œ ì¸í„°í˜ì´ìŠ¤ë¡œ ë§Œë“  ì‹¤ì œ ê°ì²´ì…ë‹ˆë‹¤.

**Creator**
Creator í´ë˜ìŠ¤ëŠ” ìƒˆ Product í´ë˜ìŠ¤ë¥¼ ë¦¬í„´í•˜ëŠ” íŒ©í† ë¦¬ ë©”ì†Œë“œë¥¼ ì„ ì–¸í•©ë‹ˆë‹¤. ì´ ë¦¬í„´ íƒ€ì…ì€ Product ì¸í„°í˜ì´ìŠ¤ì™€ ì¼ì¹˜í•´ì•¼í•©ë‹ˆë‹¤. íŒ©í† ë¦¬ ë©”ì†Œë“œë¥¼ ì¶”ìƒì (abstract)ë¡œ ì„ ì–¸í•˜ì—¬ ëª¨ë“  ì„œë¸Œ í´ë˜ìŠ¤ê°€ ìì²´ ë©”ì†Œë“œë¥¼ êµ¬í˜„í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

**Concrete Creators**(Factory)
Concrete CreatorsëŠ” ê¸°ë³¸ íŒ©í† ë¦¬ ë©”ì†Œë“œë¥¼ ì¬ì •ì˜í•˜ì—¬ ë‹¤ë¥¸ íƒ€ì…ì˜ Productë¥¼ ë°˜í™˜í•©ë‹ˆë‹¤.

### í”„ë¡œì íŠ¸ ì ìš©
* Creator - `AlertFactoryService`, `AlertDataService`
* Concrete Creator - `AlertImplementation`, `AlertViewDataMaker`
* Concrete Product - `AlertViewData`, `UIAlertController`

ìœ„ì™€ ê°™ì€ íƒ€ì…ìœ¼ë¡œ Factory Pattern ì¶”ìƒí™”/ì‹¤ì²´í™”ë¥¼ ì ìš©í–ˆìŠµë‹ˆë‹¤.

</details>
 
<details>
    <summary><big>âœ… SceneDelegateì—ì„œ ìµœìƒë‹¨ ë·°ì»¨íŠ¸ë¡¤ëŸ¬ ì–»ê¸°</big></summary>
    
SceneDelegateì˜ window í”„ë¡œí¼í‹°ë¥¼ ì´ìš©í•´ `rootViewController`(as UINavigationController) -> `topViewController`(as DiaryContentViewController) ìˆœìœ¼ë¡œ ìµœìƒìœ„ ë·°ì»¨íŠ¸ë¡¤ëŸ¬ë¥¼ ì–»ì—ˆìŠµë‹ˆë‹¤.

```swift
guard let navigationController = window?.rootViewController as? UINavigationController,
      let topViewController = navigationController.topViewController,
      let diaryContentViewController = topViewController as? DiaryContentViewController
else { return }
```
</details>

<details>
    <summary><big>âœ… CoreData</big></summary>

# CoreData
    
## CoreData ì €ì¥ ìœ„ì¹˜ ê´€ë¦¬ ê°ì²´
CoreDataë¥¼ í™œìš©í•˜ê¸° ìœ„í•´ì„œëŠ” ë¨¼ì € CoreDataModelì„ ìƒì„±í•˜ê³  **Core Data Stack**ì„ ì¤€ë¹„í•´ì•¼í•œë‹¤.

iOS 10 ì´ì „ ë²„ì „ì—ì„œëŠ” NSPersistentContainer í´ë˜ìŠ¤ê°€ ì—†ì—ˆê¸° ë•Œë¬¸ì— Core Data Stackì„ êµ¬ì„±í•˜ëŠ” ManagedObjectModel, ManagedObjectContext, PersistentStoreCoordinatorë¥¼ ì§ì ‘ ì„¤ì •í•´ì•¼ í–ˆì§€ë§Œ PersistentContainerì˜ ë“±ì¥ìœ¼ë¡œ í•´ë‹¹ ê³¼ì •ì´ ìº¡ìŠí™”ë˜ì—ˆë‹¤.

ManagedObjectë¥¼ PersistentStoreì— ì €ì¥í•˜ê³ , í•´ë‹¹ ê²½ë¡œë¥¼ ê´€ë¦¬í•˜ëŠ” ê°ì²´ëŠ” `NSPersistentStoreCoordinator` ì¸ìŠ¤í„´ìŠ¤ì´ë‹¤.

<img src="https://i.imgur.com/tTftQrB.png" width="500">

- NSManagedObjectModel : ê´€ë¦¬ ê°ì²´ ëª¨ë¸ë¡œ .xcdatamodeld íŒŒì¼ì„ ë‚˜íƒ€ë‚´ëŠ” í”„ë¡œê·¸ë˜ë°ì ì¸ í‘œí˜„ì…ë‹ˆë‹¤.
    - í•´ë‹¹ íƒ€ì…ì˜ ì¸ìŠ¤í„´ìŠ¤ì— ì ‘ê·¼í•´ ëª¨ë¸ì„ ë³€ê²½í•˜ê±°ë‚˜ ìˆ˜ì •í•˜ëŠ” ë“±ì˜ ê¸°ëŠ¥ì„ ìˆ˜í–‰í•  ìˆ˜ ìˆë‹¤.
- NSManagedObjectContext : ê´€ë¦¬ ê°ì²´ ì»¨í…ìŠ¤íŠ¸ë¡œ ê´€ë¦¬ ê°ì²´ê°€ ì¡´ì¬í•˜ëŠ” ì˜ì—­ì…ë‹ˆë‹¤.
    - ì•±ì—ì„œ ê´€ë¦¬ ê°ì²´ì˜ ìƒì„±, ì‚­ì œ, í¸ì§‘ ë“±ì„ ìˆ˜í–‰í•˜ê¸° ìœ„í•´ NSManagedObjectContextì™€ í†µì‹ í•œë‹¤.
- NSPersistentStoreCoordinator : ëª¨ë¸ì„ ì‚¬ìš©í•˜ì—¬ ì»¨í…ìŠ¤íŠ¸ì™€ persistent storeì˜ í†µì‹ ì„ ë•ëŠ” ì—­í• ì„ í•œë‹¤.
    - ì‹¤ì œ ì €ì¥ì†Œì™€ object modelì„ ì—°ê²°í•˜ëŠ” ë‹¤ë¦¬ ì—­í• ì„ í•©ë‹ˆë‹¤. NSManagedObjectContextì˜ ìš”ì²­ì— ëŒ€í•œ ë‹µì„ ì£¼ê³ , dataì— ëŒ€í•œ ê²€ì¦ë„ ìˆ˜í–‰í•œë‹¤.

Persistent containerëŠ” ì¸ìŠ¤í„´ìŠ¤ëŠ” í”„ë¡œí¼í‹°ë¡œ persistentStoreCoordinatorë¥¼ ê°€ì§€ê³  ìˆë‹¤. í•´ë‹¹ í”„ë¡œí¼í‹°ì˜ `setURL(_:for:)` ë©”ì„œë“œë¡œ ì €ì¥ì†Œ ìœ„ì¹˜ë¥¼ íŠ¹ì •í•  ìˆ˜ ìˆìœ¼ë©°, ê¸°ë³¸ì ìœ¼ë¡œ Application Supportê°€ ê¸°ë³¸ ìœ„ì¹˜ë¡œ ë˜ì–´ìˆë‹¤.

</br>


    
</details>

<details>
    <summary><big>âœ… CoreData Migration</big></summary>
    
## CoreData Migration

### Lightweight Migration
- Attributeë¥¼ ì¶”ê°€í•  ê²½ìš°
- Attributeë¥¼ ì‚­ì œí•  ê²½ìš°
- ë…¼ì˜µì…”ë„ Attributeë¥¼ ì˜µì…”ë„ë¡œ ë°”ê¿€ ê²½ìš°
- ì˜µì…”ë„ Attributeë¥¼ ë…¼ì˜µì…”ë„ë¡œ ë°”ê¾¸ê³ , ê¸°ë³¸ê°’ì„ ì •ì˜í•  ê²½ìš°
- Entityëª…ì´ë‚˜ í”„ë¡œí¼í‹°ëª…ì„ ìˆ˜ì •í•  ê²½ìš°

</br>

**Lightweight Migration í•˜ê¸°**

```swift
let psc = NSPersistentStoreCoordinator(managedObjectModel: mom)
let options = [NSMigratePersistentStoresAutomaticallyOption: true, NSInferMappingModelAutomaticallyOption: true]
do {
    try psc.addPersistentStore(ofType: NSSQLiteStoreType, configurationName: nil, at: storeURL, options: options)
} catch {
    fatalError("Failed to add persistent store: \(error)")
}
///

let description = NSPersistentStoreDescription()
description.shoudMigrateStoreAutomatically = true
description.shouldInferMappingModelAutomatically = true
container.persistentStoreDescriptions = [description]

```
Core Dataê°€ ì‹¤ì œë¡œ ë§ˆì´ê·¸ë ˆì´ì…˜ ì‘ì—…ì„ ìˆ˜í–‰í•˜ì§€ ì•Šê³  ì›ë³¸ ëª¨ë¸ê³¼ ëŒ€ìƒ ëª¨ë¸ ê°„ì˜ ë§¤í•‘ ëª¨ë¸ì„ ìœ ì¶”í•  ìˆ˜ ìˆëŠ”ì§€ ì—¬ë¶€ë¥¼ ë¯¸ë¦¬ í™•ì¸í•˜ë ¤ë©´ NSMappingModelì˜ inferredMappingModel(forSourceModel:destinationModel:) ë©”ì†Œë“œë¥¼ ì‚¬ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì´ ë©”ì„œë“œëŠ” Core Dataê°€ ìƒì„±í•  ìˆ˜ ìˆëŠ” ê²½ìš° ì¶”ë¡ ëœ ëª¨ë¸ì„ ë°˜í™˜í•©ë‹ˆë‹¤. ê·¸ë ‡ì§€ ì•Šìœ¼ë©´ nilì„ ë°˜í™˜í•©ë‹ˆë‹¤.

ë°ì´í„° ë³€ê²½ì´ ìë™ ë§ˆì´ê·¸ë ˆì´ì…˜ ê¸°ëŠ¥ì„ ì´ˆê³¼í•˜ëŠ” ê²½ìš° HeavyweightMigration(ìˆ˜ë™ ë§ˆì´ê·¸ë ˆì´ì…˜ì´ë¼ê³ ë„ í•¨)ì„ ìˆ˜í–‰í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

</br>

### Heavyweight Migration
ê¸°ë³¸ ì¡°ê±´: LightWeight Migrationì˜ ê¸°ëŠ¥ì„ ì´ˆê³¼í•˜ëŠ” ì‘ì—…ì˜ ê²½ìš° ì‚¬ìš©.

- ë°ì´í„°ë² ì´ìŠ¤ì˜ ì •ê·œí™” / ì¼ë°˜í™”. ì¦‰, ì‹ ê·œ ì—”í‹°í‹°ì˜ ìƒì„± ë° relationship ì„¤ì •ì„ í•˜ëŠ” ê²½ìš°
- ë°ì´í„°ì— ëŒ€í•œ ì¤‘ìš”í•œ Customizingì„ ìˆ˜í–‰í•˜ëŠ” ê²½ìš°

</br>

</details>

<details>
    <summary><big>âœ… CLLocationManager</big></summary>
    
## ìœ ì €ì—ê²Œ ìœ„ì¹˜ ê¶Œí•œì„ ì–»ëŠ” ê³¼ì •
    
* ê¶Œí•œ ìš”ì²­ ê°ì²´: CLLocationManager
* ê¶Œí•œ ìš”ì²­ ê³¼ì •
CLLocationManager Delegate ë©”ì„œë“œë¥¼ í™œìš©í•´, ê¶Œí•œì´ ë³€ê²½ë˜ì—ˆì„ ë•Œ `locationManagerDidChangeAuthorization` ë©”ì„œë“œ ë‚´ì—ì„œ í˜„ì¬ `authorizationStatus` ë¥¼ í™•ì¸í•˜ì—¬ ê¶Œí•œì´ ë¶€ì—¬ëœ ê²½ìš°(case: authorizedWhenInUse, authorizedAlways) `startUpdatingLocation` ë©”ì„œë“œë¥¼ ìˆ˜í–‰í•˜ë„ë¡ í•˜ì˜€ìŠµë‹ˆë‹¤.
`startUpdatingLocation`ë¥¼ í˜¸ì¶œí•˜ë©´ ìˆ˜í–‰ë˜ëŠ” `didUpdateLocations` ë©”ì„œë“œì—ì„œëŠ” í˜„ì¬ ìœ„ì¹˜ë¥¼ ê°€ì ¸ì™€ ì ì ˆí•œ ì²˜ë¦¬ë¥¼ í•´ì£¼ì—ˆìŠµë‹ˆë‹¤.

ê³µì‹ ë¬¸ì„œì˜ ìœ ì˜ ì‚¬í•­ì— ë”°ë¼ ì•± ì‹¤í–‰ ì§í›„ ê¶Œí•œì„ ìš”ì²­í•˜ê¸° ë³´ë‹¤ëŠ” Location Serviceë¥¼ ì´ìš©í•˜ëŠ” TextView í™”ë©´ì— ì§„ì…í–ˆì„ ë•Œ ê¶Œí•œì„ ìš”ì²­í•˜ë„ë¡ ì„¤ê³„í–ˆìŠµë‹ˆë‹¤.

</details>

---
    
</br>

# ğŸ«‚ íŒ€ íšŒê³ 
### ìš°ë¦¬íŒ€ì´ ì˜í•œ ì 
- í”„ë¡œì íŠ¸ ìˆ˜í–‰ë³´ë‹¤ ì¤‘ìš” ë‚´ìš© í•™ìŠµì— ì§‘ì¤‘í•œ ì 
- ëê¹Œì§€ ëª¨ë¥´ëŠ” ë¶€ë¶„ì— ëŒ€í•´ì„œ í•´ê²°í•˜ë ¤ê³  ë…¸ë ¥í•˜ê³  ë‚˜ë¦„ì˜ ê²°ë¡ ì„ ë‚´ë¦° ì 
- 3ì£¼ ë™ì•ˆ í”„ë¡œì íŠ¸ë¥¼ ì§„í–‰í•˜ë©´ì„œ ì§€ì¹˜ëŠ” ì‹œê°„ë„ ìˆì—ˆì§€ë§Œ ì„œë¡œ ì‘ì›í•˜ë©° ì—´ì‹¬íˆ í•œ ì 

### ìš°ë¦¬íŒ€ì´ ë…¸ë ¥í•  ì 
- ë‚˜ì¤‘ì— ê¼­ í…ŒìŠ¤íŠ¸ ì½”ë“œë¥¼ ì‘ì„±í•´ì„œ í…ŒìŠ¤íŠ¸ í•´ë³´ì !
- í”„ë¡œì íŠ¸ê°€ ì¢…ë£Œëœ ì´í›„ì—ë„ í•´ê²°ë˜ì§€ ì•Šì•˜ë˜ ë¬¸ì œì— ëŒ€í•´ì„œ ê³ ë¯¼í•´ë³´ì !
- ìì—°ìŠ¤ëŸ¬ìš´ ë„¤ì´ë°ì„ í•  ìˆ˜ ìˆë„ë¡ ê³ ë¯¼í•˜ì!

</br>

# ğŸ“š ì°¸ê³  ë§í¬

* [WWDC: MakingApps Adaptive, Part1](https://asciiwwdc.com/2016/sessions/222)
* [WWDC: MakingApps Adaptive, Part2](https://asciiwwdc.com/2016/sessions/233)
* [ğŸApple Docs - UITextView](https://developer.apple.com/documentation/uikit/uitextview)
* [ğŸApple Docs - UITextViewDelegate](https://developer.apple.com/documentation/uikit/uitextviewdelegate)
* [ğŸApple Docs - Adjusting Your Layout with Keyboard Layout Guide](https://developer.apple.com/documentation/uikit/keyboards_and_input/adjusting_your_layout_with_keyboard_layout_guide)
* [ğŸApple Docs - keyboardFrameEndUserInfoKey](https://developer.apple.com/documentation/uikit/uiresponder/1621578-keyboardframeenduserinfokey)
* [ğŸApple Docs - CoreData](https://developer.apple.com/documentation/coredata)
* [ğŸApple Docs - UISwipeActionsConfiguration](https://developer.apple.com/documentation/uikit/uiswipeactionsconfiguration)
* [ğŸApple Docs - UIContextualAction](https://developer.apple.com/documentation/uikit/uicontextualaction)
* [ğŸApple Docs - Core Location](https://developer.apple.com/documentation/corelocation)
* [ğŸApple Docs - Using Lightweight Migration](https://developer.apple.com/documentation/coredata/using_lightweight_migration)
